(()=>{function e(e){return["terms of service","privacy policy","user agreement","license agreement"].some((function(n){return e.toLowerCase().includes(n)}))}console.log("Content script loaded."),chrome.runtime.onMessage.addListener((function(e,n,t){var o,r;"displayAnalysisResults"===e.action&&(console.log("Received analysis results to display."),o=e.analysisResults,(r=document.createElement("div")).setAttribute("id","termsGuardianResultsOverlay"),r.innerHTML='\n        <div style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:10000000;">\n            <div style="background:#fff;padding:20px;box-shadow:0 4px 6px rgba(0,0,0,0.1);border-radius:8px;max-width:600px;margin:50px auto;">\n                <h2>Agreement Analysis Results</h2>\n                <p><strong>Clarity Grade:</strong> '.concat(o.clarityGrade,"</p>\n                <p><strong>Content Grade:</strong> ").concat(o.contentGrade,"</p>\n                <p><strong>Key Excerpts:</strong> ").concat(o.keyExcerpts,"</p>\n                <p><strong>Reasons for Grade:</strong> ").concat(o.reasons,"</p>\n                <button onclick=\"document.getElementById('termsGuardianResultsOverlay').remove();\">Close</button>\n            </div>\n        </div>\n    "),document.body.appendChild(r))})),chrome.contextMenus.onClicked.addListener((function(n,t){if("gradeAgreement"===n.menuItemId){var o=n.selectionText;o&&e(o)?(console.log("User agreement text selected."),r=o,chrome.runtime.sendMessage({action:"analyzeText",text:r},(function(e){chrome.runtime.lastError?console.error("Error sending message to background script:",chrome.runtime.lastError.message):console.log("Selected text sent to background script for analysis.")}))):console.log("Selected text does not seem to be a user agreement.")}var r})),document.addEventListener("selectionchange",(function(){var n=window.getSelection().toString().trim();n&&e(n)?chrome.runtime.sendMessage({action:"enableContextMenu",enable:!0},(function(e){chrome.runtime.lastError?console.error("Error enabling context menu:",chrome.runtime.lastError.message):console.log("Context menu enabled for selected text.")})):chrome.runtime.sendMessage({action:"enableContextMenu",enable:!1},(function(e){chrome.runtime.lastError?console.error("Error disabling context menu:",chrome.runtime.lastError.message):console.log("Context menu disabled as selected text does not match criteria.")}))}))})();